<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: radial-gradient(circle, #1a1a1a, #000); color: white; text-align: center; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; height: 100vh; margin: 0; overflow: hidden; }
        .arena { height: 100%; display: flex; align-items: center; justify-content: center; position: relative; perspective: 1000px; }
        .card { width: 140px; height: 210px; border: 3px solid gold; border-radius: 12px; position: absolute; box-shadow: 0 0 25px rgba(255,215,0,0.4); transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); background: linear-gradient(135deg, #333, #111); display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: bold; }
        #p1 { left: -200px; transform: rotateY(20deg); }
        #p2 { right: -200px; transform: rotateY(-20deg); }
        .card img { width: 100%; height: 100%; border-radius: 10px; object-fit: cover; }
        .name-tag { position: absolute; bottom: -30px; background: gold; color: black; padding: 2px 10px; border-radius: 5px; font-size: 14px; width: 80%; }
        .btn-fight { position: fixed; bottom: 40px; padding: 15px 50px; font-size: 20px; background: linear-gradient(to bottom, #ff4500, #ff8c00); border: none; border-radius: 50px; color: white; font-weight: bold; box-shadow: 0 5px 15px rgba(255,69,0,0.4); z-index: 10; }
        .impact { animation: shake 0.3s 2; }
        @keyframes shake { 0% { transform: translate(10px, 10px); } 50% { transform: translate(-10px, -10px); } 100% { transform: translate(0, 0); } }
    </style>
</head>
<body>
    <div class="arena" id="arena">
        <div id="p1" class="card"><div class="name-tag" id="n1">PLAYER 1</div></div>
        <div id="p2" class="card"><div class="name-tag" id="n2">PLAYER 2</div></div>
        <button class="btn-fight" onclick="startBattle()">⚡ CLASH ⚡</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // KUNIN ANG DATA MULA SA URL PARAMETERS
        const urlParams = new URLSearchParams(window.location.search);
        document.getElementById('n1').innerText = urlParams.get('p1') || "Player 1";
        document.getElementById('n2').innerText = urlParams.get('p2') || "Player 2";

        // ENTRANCE ANIMATION
        setTimeout(() => {
            document.getElementById('p1').style.left = '10%';
            document.getElementById('p2').style.right = '10%';
        }, 500);

        function startBattle() {
            const p1 = document.getElementById('p1');
            const p2 = document.getElementById('p2');
            const arena = document.getElementById('arena');

            p1.style.left = '35%';
            p2.style.right = '35%';

            setTimeout(() => {
                arena.classList.add('impact');
                if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('heavy');
                
                setTimeout(() => {
                    tg.close(); // Babalik sa Telegram pagkatapos ng laban
                }, 1500);
            }, 600);
        }
    </script>
</body>
</html>
